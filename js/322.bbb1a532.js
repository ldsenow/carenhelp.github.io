"use strict";(self["webpackChunkcare"]=self["webpackChunkcare"]||[]).push([[322],{28180:(e,t,n)=>{n.d(t,{Z:()=>p});var o=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function c(e){try{s(o.next(e))}catch(t){i(t)}}function l(e){try{s(o["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):r(e.value).then(c,l)}s((o=o.apply(e,t||[])).next())}))};const r="care",i=1,c="inventoryItems",l="priceItems";function s(){return new Promise(((e,t)=>{const n=indexedDB.open(r,i);n.onsuccess=function(){e(this.result)},n.onerror=()=>t(),n.onupgradeneeded=function(e){const t=e.currentTarget.result,n=t.createObjectStore(c,{keyPath:"itemCode",autoIncrement:!1});n.createIndex("itemShortCode","itemShortCode",{unique:!1});const o=t.createObjectStore(l,{keyPath:"clientCode",autoIncrement:!1});o.createIndex("price","price",{unique:!1})}}))}function a(e,t){return o(this,void 0,void 0,(function*(){const n=yield s(),o=n.transaction(e,t);return o.objectStore(e)}))}function u(e,t){return o(this,void 0,void 0,(function*(){const n=yield a(e,t);return new Promise(((e,t)=>{const o=n.getAll();o.onsuccess=function(t){e(t.target.result)},o.onerror=t}))}))}function d(e){return o(this,void 0,void 0,(function*(){const t=yield a(e,"readwrite"),n=t.clear();return new Promise(((e,t)=>{n.onsuccess=()=>e(),n.onerror=t}))}))}const p={openDb:s,getObjectStore:a,clearObjectStore:d,getAll:u}},15156:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(28180),r=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function c(e){try{s(o.next(e))}catch(t){i(t)}}function l(e){try{s(o["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):r(e.value).then(c,l)}s((o=o.apply(e,t||[])).next())}))};const i="priceItems";class c{getPriceItems(){return r(this,void 0,void 0,(function*(){return yield o.Z.getAll(i,"readonly")}))}savePriceItems(e){return r(this,void 0,void 0,(function*(){yield o.Z.clearObjectStore(i);const t=yield o.Z.getObjectStore(i,"readwrite");e.forEach((e=>{t.put(Object.assign({},null!==e&&void 0!==e?e:{}))}))}))}}const l=new c},55322:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var o=n(83673),r=n(98880),i=n(62323);const c=(0,o._)("h1",{class:"text-h4"},"Prices",-1),l=(0,o.Uk)(" File size ");function s(e,t,n,s,a,u){const d=(0,o.up)("q-icon"),p=(0,o.up)("q-file"),m=(0,o.up)("q-btn"),f=(0,o.up)("q-td"),v=(0,o.up)("q-tr"),w=(0,o.up)("q-table"),h=(0,o.up)("q-card-section"),y=(0,o.up)("q-card"),g=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(g,{class:"items-center justify-evenly",style:{padding:"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[c,(0,o.Wm)(p,{filled:"","bottom-slots":"",modelValue:e.priceFile,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.priceFile=t),e.parseCsv],label:"Prices list file",counter:""},{prepend:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"cloud_upload",onClick:t[0]||(t[0]=(0,r.iM)((()=>{}),["stop"]))})])),append:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"close",onClick:t[1]||(t[1]=(0,r.iM)((t=>e.model=null),["stop"])),class:"cursor-pointer"})])),hint:(0,o.w5)((()=>[l])),_:1},8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(w,{style:{"margin-top":"30px"},rows:e.priceItems,columns:[{name:"clientCode",field:"clientCode",label:"Client Code",align:"left",style:"width:200px;"},{name:"price",field:"price",label:"Price",align:"left",style:"width:100px;"}],"row-key":"clientCode",title:"Prices for certain client.",color:"primary","hide-pagination":!0,pagination:{rowsPerPage:1e3}},(0,o.Nv)({body:(0,o.w5)((e=>[(0,o.Wm)(v,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{key:"clientCode",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.clientCode),1)])),_:2},1032,["props"]),(0,o.Wm)(f,{key:"price",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(parseFloat(e.row.price.toFixed(2))),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:2},[e.priceItems.length>0?{name:"top-right",fn:(0,o.w5)((()=>[(0,o.Wm)(m,{onClick:e.savePriceItems,color:"primary","icon-right":"save",label:"Save","no-caps":""},null,8,["onClick"])]))}:void 0]),1032,["rows"])])),_:1})])),_:1})])),_:1})}var a=n(61959),u=n(6015),d=n.n(u),p=n(15156),m=n(48825);const f=(0,o.aZ)({name:"Prices",components:{},setup(){const e=(0,m.Z)(),t=(0,a.iH)(null),n=(0,a.iH)([]);return p.Z.getPriceItems().then((e=>{n.value=e})),{priceFile:t,priceItems:n,savePriceItems:()=>{p.Z.savePriceItems(n.value).then((()=>{e.notify({message:"Price items updated",color:"positive",icon:"info"})}))},parseCsv:()=>{t.value&&d().parse(t.value,{header:!0,skipEmptyLines:!0,complete:e=>{n.value=e.data.map((e=>({clientCode:null===e||void 0===e?void 0:e.clientCode,price:parseFloat(null===e||void 0===e?void 0:e.price)})))}})}}}});var v=n(24379),w=n(10151),h=n(25589),y=n(64974),g=n(24554),C=n(22659),P=n(64607),b=n(18186),Z=n(83884),k=n(7518),I=n.n(k);f.render=s;const x=f;I()(f,"components",{QPage:v.Z,QCard:w.Z,QCardSection:h.Z,QFile:y.Z,QIcon:g.Z,QTable:C.Z,QBtn:P.Z,QTr:b.Z,QTd:Z.Z})}}]);