(self["webpackChunkcare"]=self["webpackChunkcare"]||[]).push([[786],{9257:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function s(e){try{l(o["throw"](e))}catch(t){i(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,s)}l((o=o.apply(e,t||[])).next())}))};const r="care",i=1,a="inventoryItems";function s(){return new Promise(((e,t)=>{const n=indexedDB.open(r,i);n.onsuccess=function(){e(this.result)},n.onerror=()=>t(),n.onupgradeneeded=function(e){const t=e.currentTarget.result,n=t.createObjectStore(a,{keyPath:"itemCode",autoIncrement:!1});n.createIndex("itemShortCode","itemShortCode",{unique:!1})}}))}function l(e,t){return o(this,void 0,void 0,(function*(){const n=yield s(),o=n.transaction(e,t);return o.objectStore(e)}))}function c(e,t){return o(this,void 0,void 0,(function*(){const n=yield l(e,t);return new Promise(((e,t)=>{const o=n.getAll();o.onsuccess=function(t){e(t.target.result)},o.onerror=t}))}))}function u(e){return o(this,void 0,void 0,(function*(){const t=yield l(e,"readwrite"),n=t.clear();return new Promise(((e,t)=>{n.onsuccess=()=>e(),n.onerror=t}))}))}const d={openDb:s,getObjectStore:l,clearObjectStore:u,getAll:c};var p=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function s(e){try{l(o["throw"](e))}catch(t){i(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,s)}l((o=o.apply(e,t||[])).next())}))};const m="inventoryItems";class f{getInventoryItems(){return p(this,void 0,void 0,(function*(){return yield d.getAll(m,"readonly")}))}saveInventoryItems(e){return p(this,void 0,void 0,(function*(){yield d.clearObjectStore(m);const t=yield d.getObjectStore(m,"readwrite");e.forEach((e=>{t.add(JSON.parse(JSON.stringify(e)))}))}))}}const v=new f},6786:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});n(7280),n(5363),n(246);var o=n(3673),r=n(8880),i=n(2323);const a=(0,o.Wm)("h1",{class:"text-h4"},"Settings",-1),s=(0,o.Uk)(" File size ");function l(e,t,n,l,c,u){const d=(0,o.up)("q-icon"),p=(0,o.up)("q-file"),m=(0,o.up)("q-btn"),f=(0,o.up)("q-td"),v=(0,o.up)("q-tr"),y=(0,o.up)("q-table"),w=(0,o.up)("q-card-section"),h=(0,o.up)("q-card"),g=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(g,{class:"items-center justify-evenly",style:{padding:"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[a,(0,o.Wm)(p,{filled:"","bottom-slots":"",modelValue:e.inventoryFile,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.inventoryFile=t),e.parseCsv],label:"Xero inventory file",counter:""},{prepend:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"cloud_upload",onClick:t[1]||(t[1]=(0,r.iM)((()=>{}),["stop"]))})])),append:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"close",onClick:t[2]||(t[2]=(0,r.iM)((t=>e.model=null),["stop"])),class:"cursor-pointer"})])),hint:(0,o.w5)((()=>[s])),_:1},8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(y,{style:{"margin-top":"30px"},rows:e.inventoryItems,columns:[{name:"itemCode",field:"itemCode",label:"Item Code",align:"left",style:"width:200px;"},{name:"itemShortCode",field:"itemShortCode",label:"Short Code",align:"left",style:"width:100px;"},{name:"description",field:"description",label:"Description",align:"left",style:"width:500px; white-space: initial"},{name:"unitPrice",field:"unitPrice",label:"Unit Price",align:"left"},{name:"salesTaxRate",field:"salesTaxRate",label:"Sales Tax",align:"left"}],"row-key":"itemCode",title:"Inventory Items",color:"primary","hide-pagination":!0,pagination:{rowsPerPage:1e4}},(0,o.Nv)({body:(0,o.w5)((e=>[(0,o.Wm)(v,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{key:"itemCode",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.itemCode),1)])),_:2},1032,["props"]),(0,o.Wm)(f,{key:"itemShortCode",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.itemShortCode),1)])),_:2},1032,["props"]),(0,o.Wm)(f,{key:"description",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)("div",{innerHTML:e.row.description.replace(/(?:\r\n|\r|\n)/g,"<br/>")},null,8,["innerHTML"])])),_:2},1032,["props"]),(0,o.Wm)(f,{key:"unitPrice",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.unitPrice),1)])),_:2},1032,["props"]),(0,o.Wm)(f,{key:"salesTaxRate",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.salesTaxRate),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:2},[e.inventoryItems.length>0?{name:"top-right",fn:(0,o.w5)((()=>[(0,o.Wm)(m,{onClick:e.saveInventoryItems,color:"primary","icon-right":"save",label:"Save","no-caps":""},null,8,["onClick"])]))}:void 0]),1032,["rows"])])),_:1})])),_:1})])),_:1})}var c=n(1959),u=n(6015),d=n.n(u),p=n(9257),m=n(8825);const f=(0,o.aZ)({name:"Settings",components:{},setup(){const e=(0,m.Z)(),t=(0,c.iH)(null),n=(0,c.iH)([]);return p.Z.getInventoryItems().then((e=>{n.value=e})),{inventoryFile:t,inventoryItems:n,saveInventoryItems:()=>{p.Z.saveInventoryItems(n.value).then((()=>{e.notify({message:"Inventory items updated",color:"positive",icon:"info"})}))},parseCsv:()=>{t.value&&d().parse(t.value,{header:!0,skipEmptyLines:!0,complete:e=>{n.value=e.data.map((e=>({itemCode:e["*ItemCode"],itemShortCode:e.ItemName.includes("_")?e.ItemName.split("_")[0]:"",itemName:e.ItemName,description:e.SalesDescription,unitPrice:e.SalesUnitPrice,salesAccount:e.SalesAccount,salesTaxRate:e.SalesTaxRate})))}})}}}});var v=n(4379),y=n(151),w=n(5589),h=n(4974),g=n(4554),I=n(2659),C=n(4607),S=n(8186),b=n(3884),k=n(7518),x=n.n(k);f.render=l;const P=f;x()(f,"components",{QPage:v.Z,QCard:y.Z,QCardSection:w.Z,QFile:h.Z,QIcon:g.Z,QTable:I.Z,QBtn:C.Z,QTr:S.Z,QTd:b.Z})}}]);