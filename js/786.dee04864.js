"use strict";(self["webpackChunkcare"]=self["webpackChunkcare"]||[]).push([[786],{28180:(e,t,n)=>{n.d(t,{Z:()=>p});var o=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function s(e){try{l(o["throw"](e))}catch(t){i(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,s)}l((o=o.apply(e,t||[])).next())}))};const r="care",i=1,a="inventoryItems",s="priceItems";function l(){return new Promise(((e,t)=>{const n=indexedDB.open(r,i);n.onsuccess=function(){e(this.result)},n.onerror=()=>t(),n.onupgradeneeded=function(e){const t=e.currentTarget.result,n=t.createObjectStore(a,{keyPath:"itemCode",autoIncrement:!1});n.createIndex("itemShortCode","itemShortCode",{unique:!1});const o=t.createObjectStore(s,{keyPath:"clientCode",autoIncrement:!1});o.createIndex("price","price",{unique:!1})}}))}function c(e,t){return o(this,void 0,void 0,(function*(){const n=yield l(),o=n.transaction(e,t);return o.objectStore(e)}))}function u(e,t){return o(this,void 0,void 0,(function*(){const n=yield c(e,t);return new Promise(((e,t)=>{const o=n.getAll();o.onsuccess=function(t){e(t.target.result)},o.onerror=t}))}))}function d(e){return o(this,void 0,void 0,(function*(){const t=yield c(e,"readwrite"),n=t.clear();return new Promise(((e,t)=>{n.onsuccess=()=>e(),n.onerror=t}))}))}const p={openDb:l,getObjectStore:c,clearObjectStore:d,getAll:u}},80966:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(28180),r=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function s(e){try{l(o["throw"](e))}catch(t){i(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,s)}l((o=o.apply(e,t||[])).next())}))};const i="inventoryItems";class a{getInventoryItems(){return r(this,void 0,void 0,(function*(){return yield o.Z.getAll(i,"readonly")}))}saveInventoryItems(e){return r(this,void 0,void 0,(function*(){yield o.Z.clearObjectStore(i);const t=yield o.Z.getObjectStore(i,"readwrite");e.forEach((e=>{t.add(JSON.parse(JSON.stringify(e)))}))}))}}const s=new a},16786:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});n(67280),n(65363),n(90246);var o=n(83673),r=n(98880),i=n(62323);const a=(0,o._)("h1",{class:"text-h4"},"Settings",-1),s=(0,o.Uk)(" File size "),l=["innerHTML"];function c(e,t,n,c,u,d){const p=(0,o.up)("q-icon"),m=(0,o.up)("q-file"),f=(0,o.up)("q-btn"),v=(0,o.up)("q-td"),y=(0,o.up)("q-tr"),w=(0,o.up)("q-table"),h=(0,o.up)("q-card-section"),g=(0,o.up)("q-card"),I=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(I,{class:"items-center justify-evenly",style:{padding:"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[a,(0,o.Wm)(m,{filled:"","bottom-slots":"",modelValue:e.inventoryFile,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.inventoryFile=t),e.parseCsv],label:"Xero inventory file",counter:""},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"cloud_upload",onClick:t[0]||(t[0]=(0,r.iM)((()=>{}),["stop"]))})])),append:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"close",onClick:t[1]||(t[1]=(0,r.iM)((t=>e.model=null),["stop"])),class:"cursor-pointer"})])),hint:(0,o.w5)((()=>[s])),_:1},8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(w,{style:{"margin-top":"30px"},rows:e.inventoryItems,columns:[{name:"itemCode",field:"itemCode",label:"Item Code",align:"left",style:"width:200px;"},{name:"itemShortCode",field:"itemShortCode",label:"Short Code",align:"left",style:"width:100px;"},{name:"description",field:"description",label:"Description",align:"left",style:"width:500px; white-space: initial"},{name:"unitPrice",field:"unitPrice",label:"Unit Price",align:"left"},{name:"salesTaxRate",field:"salesTaxRate",label:"Sales Tax",align:"left"}],"row-key":"itemCode",title:"Inventory Items",color:"primary","hide-pagination":!0,pagination:{rowsPerPage:1e4}},(0,o.Nv)({body:(0,o.w5)((e=>[(0,o.Wm)(y,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{key:"itemCode",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.itemCode),1)])),_:2},1032,["props"]),(0,o.Wm)(v,{key:"itemShortCode",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.itemShortCode),1)])),_:2},1032,["props"]),(0,o.Wm)(v,{key:"description",props:e},{default:(0,o.w5)((()=>[(0,o._)("div",{innerHTML:e.row.description.replace(/(?:\r\n|\r|\n)/g,"<br/>")},null,8,l)])),_:2},1032,["props"]),(0,o.Wm)(v,{key:"unitPrice",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.unitPrice),1)])),_:2},1032,["props"]),(0,o.Wm)(v,{key:"salesTaxRate",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.salesTaxRate),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:2},[e.inventoryItems.length>0?{name:"top-right",fn:(0,o.w5)((()=>[(0,o.Wm)(f,{onClick:e.saveInventoryItems,color:"primary","icon-right":"save",label:"Save","no-caps":""},null,8,["onClick"])]))}:void 0]),1032,["rows"])])),_:1})])),_:1})])),_:1})}var u=n(61959),d=n(6015),p=n.n(d),m=n(80966),f=n(48825);const v=(0,o.aZ)({name:"Settings",components:{},setup(){const e=(0,f.Z)(),t=(0,u.iH)(null),n=(0,u.iH)([]);return m.Z.getInventoryItems().then((e=>{n.value=e})),{inventoryFile:t,inventoryItems:n,saveInventoryItems:()=>{m.Z.saveInventoryItems(n.value).then((()=>{e.notify({message:"Inventory items updated",color:"positive",icon:"info"})}))},parseCsv:()=>{t.value&&p().parse(t.value,{header:!0,skipEmptyLines:!0,complete:e=>{n.value=e.data.map((e=>({itemCode:e["*ItemCode"],itemShortCode:e.ItemName.includes("_")?e.ItemName.split("_")[0]:"",itemName:e.ItemName,description:e.SalesDescription,unitPrice:e.SalesUnitPrice,salesAccount:e.SalesAccount,salesTaxRate:e.SalesTaxRate})))}})}}}});var y=n(24379),w=n(10151),h=n(25589),g=n(64974),I=n(24554),C=n(22659),S=n(64607),b=n(18186),k=n(83884),x=n(7518),Z=n.n(x);v.render=c;const P=v;Z()(v,"components",{QPage:y.Z,QCard:w.Z,QCardSection:h.Z,QFile:g.Z,QIcon:I.Z,QTable:C.Z,QBtn:S.Z,QTr:b.Z,QTd:k.Z})}}]);